(function(){var t,o,n,e=[].indexOf||function(t){for(var o=0,n=this.length;n>o;o++)if(o in this&&this[o]===t)return o;return-1};n=function(){function t(){return["pouchdb"]}return t}(),angular.module("teste-daniel",new n),t=function(){function t(t,o){this.TodoModel=o,this.remoteCouch="http://192.168.25.8:5984/todos",this.db=t(this.remoteCouch),this.sync(),this.changes()}var o;return t.prototype.todos={},t.prototype.sync=function(){var t;return this.updateTodos(),t={live:!0},this.db.replicate.to(this.remoteCouch,t).on("change",function(t){return function(){return t.updateTodos()}}(this)),this.db.replicate.from(this.remoteCouch,t).on("change",function(t){return function(){return t.updateTodos()}}(this))},t.prototype.updateTodos=function(){var t;return t={include_docs:!0,descending:!0},this.db.allDocs(t).then(function(t){return function(o){return t.todos=o.rows}}(this))},o=function(t){console.log(t._conflicts),t._conflicts&&collectConflicts(t._conflicts,function(o){var n,i;n=o.sort(byTime).unshift();for(t in o)for(i in t)e.call(n,i)>=0||(n[i]=t[i]);this.db.put(n,function(n){return function(e){if(!e)for(t in o)n.db.remove(t)}}(this))})},t.prototype.changes=function(){return this.db.changes({conflicts:!0,onChange:o})},t.prototype.insert=function(t){var o;return o=this.db.post(t),o.then(function(){return function(){return console.log("Doc incluido com sucesso")}}(this)),o["catch"](function(){return function(t){return console.log("Erro ao salvar doc",t)}}(this))},t.prototype.update=function(t){return this.doc=t?t:this.doc,this.db.put(this.doc)["catch"](function(t){return 409!==t.status?this.update():void 0})},t.prototype.removeTodo=function(t){return this.db.remove(t)},t}(),angular.module("teste-daniel").service("todoService",["pouchDB","TodoModel",t]),o=function(){function t(){return function(){function t(){this.title="",this.completed=!1,this.user="user1"}return t}()}return t}(),angular.module("teste-daniel").factory("TodoModel",[o])}).call(this);